import {
  Box_default,
  DialogActions_default,
  DialogContent_default,
  DialogTitle_default,
  Dialog_default,
  IconButton_default
} from "./chunk-24ZORQ6V.js";
import "./chunk-LPNO7DYO.js";
import "./chunk-YZVM2MHU.js";
import {
  useModalStore
} from "./chunk-GFLYE5YP.js";
import "./chunk-DFCU27W4.js";
import {
  require_jsx_runtime
} from "./chunk-YG5AX2YU.js";
import {
  require_react
} from "./chunk-73THXJN7.js";
import "./chunk-4TVFYOTQ.js";
import {
  __toESM
} from "./chunk-2TUXWMP5.js";

// node_modules/@company/commons/dist/chunk-CYANJUUX.js
var import_jsx_runtime = __toESM(require_jsx_runtime(), 1);
var import_react = __toESM(require_react(), 1);
var AppModal = ({
  open,
  onClose,
  title,
  children,
  actions,
  config = {},
  hideCloseButton = false
}) => {
  const {
    maxWidth = "sm",
    fullWidth = true,
    fullScreen = false,
    disableBackdropClick = false,
    disableEscapeKeyDown = false
  } = config;
  const handleClose = (_event, reason) => {
    if (reason === "backdropClick" && disableBackdropClick) return;
    if (reason === "escapeKeyDown" && disableEscapeKeyDown) return;
    onClose();
  };
  return (0, import_jsx_runtime.jsxs)(
    Dialog_default,
    {
      open,
      onClose: handleClose,
      maxWidth,
      fullWidth,
      fullScreen,
      children: [
        title && (0, import_jsx_runtime.jsxs)(
          DialogTitle_default,
          {
            sx: {
              display: "flex",
              alignItems: "center",
              justifyContent: "space-between",
              pr: hideCloseButton ? 3 : 1
            },
            children: [
              (0, import_jsx_runtime.jsx)(Box_default, { component: "span", children: title }),
              !hideCloseButton && (0, import_jsx_runtime.jsx)(
                IconButton_default,
                {
                  "aria-label": "close",
                  onClick: onClose,
                  sx: { color: "text.secondary" },
                  children: (0, import_jsx_runtime.jsx)(Box_default, { component: "span", sx: { fontSize: 20, lineHeight: 1 }, children: "âœ•" })
                }
              )
            ]
          }
        ),
        children && (0, import_jsx_runtime.jsx)(DialogContent_default, { dividers: true, children }),
        actions && (0, import_jsx_runtime.jsx)(DialogActions_default, { sx: { px: 3, py: 2 }, children: actions })
      ]
    }
  );
};
var ModalProvider = ({
  children,
  registry = {},
  defaultConfig
}) => {
  const current = useModalStore((state) => state.current);
  const close = useModalStore((state) => state.close);
  const renderModal = () => {
    if (!current) return null;
    const ModalComponent = registry[current.type];
    if (ModalComponent) {
      return (0, import_jsx_runtime.jsx)(AppModal, { open: true, onClose: close, config: defaultConfig, children: (0, import_jsx_runtime.jsx)(ModalComponent, { onClose: close, ...current.props ?? {} }) });
    }
    const { title, content, actions, config, ...restProps } = current.props ?? {};
    return (0, import_jsx_runtime.jsx)(
      AppModal,
      {
        open: true,
        onClose: close,
        title,
        actions,
        config: { ...defaultConfig, ...config },
        ...restProps,
        children: content
      }
    );
  };
  return (0, import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment, { children: [
    children,
    renderModal()
  ] });
};
var useModal = () => {
  const current = useModalStore((state) => state.current);
  const openModal = useModalStore((state) => state.open);
  const closeModal = useModalStore((state) => state.close);
  const open = (0, import_react.useCallback)(
    (type, props) => {
      return openModal({ type, props });
    },
    [openModal]
  );
  const close = (0, import_react.useCallback)(() => {
    closeModal();
  }, [closeModal]);
  return {
    isOpen: current !== null,
    currentModal: current,
    open,
    close
  };
};
export {
  AppModal,
  ModalProvider,
  useModal
};
//# sourceMappingURL=@company_commons_modal.js.map
